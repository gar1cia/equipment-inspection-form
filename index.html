<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Vehicle / Heavy Equipment Pre-Use Inspection Checklist</title>

  <style>
    :root{
      --heading:#00007e;   /* subheadings + radio selection */
      --btn:#283e8a;       /* buttons */
      --bg:#f6f7fb;
      --card:#ffffff;
      --ink:#000000;       /* title */
      --text:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;

      --shadow: 0 10px 24px rgba(17,24,39,.08);
      --radius:16px;
      --tap:48px;

      --itemFont: 14px;
      --sectionFont: calc(var(--itemFont) * 1.6);
      --sectionSubFont: calc(var(--sectionFont) * 0.72);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 14px;
      padding-bottom: calc(14px + env(safe-area-inset-bottom));
    }

    /* Header */
    .brandbar{
      display:flex;
      flex-direction: column;
      align-items:center;
      gap: 10px;
      text-align:center;
      padding: 18px 14px;
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 12px;
    }

    .brandbar img{
      width: min(260px, 70vw);
      height: auto;
      object-fit: contain;
    }

    h1{
      margin: 0;
      font-size: clamp(26px, 6.2vw, 40px);
      line-height: 1.12;
      letter-spacing: -.01em;
      color: var(--ink); /* keep title black */
    }

    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
    }

    /* Section headers */
    .section{
      margin: 30px 0 12px;
    }
    .section:first-of-type{ margin-top: 0; }

    .section .title{
      margin: 0;
      font-size: var(--sectionFont);
      font-weight: 900;
      letter-spacing: .08em;
      text-transform: uppercase;
      color: var(--heading);
      line-height: 1.15;
    }

    .section .sub{
      margin-top: 6px;
      font-size: var(--sectionSubFont);
      font-weight: 900;
      letter-spacing: .06em;
      text-transform: uppercase;
      color: var(--heading);
    }

    label{
      display:block;
      font-size: 12px;
      color: var(--muted);
      margin: 12px 0 6px;
    }

    /* Inputs: consistent width, left aligned values */
    input, select, textarea{
      display:block;
      width:100%;
      max-width:100%;
      min-height: var(--tap);
      padding: 12px;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: #fff;
      color: var(--text);
      font-size: 16px;       /* prevent iOS zoom */
      text-align: left;      /* left align responses */
      outline: none;
    }

    textarea{
      min-height: 110px;
      resize: vertical;
    }

    /* iOS: date/time width + left aligned displayed value */
    input[type="date"], input[type="time"]{
      -webkit-appearance: none;
      appearance: none;
      text-align: left;
      padding-left: 12px;
      padding-right: 12px;
    }
    input[type="date"]::-webkit-date-and-time-value,
    input[type="time"]::-webkit-date-and-time-value{
      text-align: left;
    }
    input[type="date"]::-webkit-datetime-edit,
    input[type="time"]::-webkit-datetime-edit{
      text-align: left;
    }

    /* Grids */
    .grid2{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    .grid3{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    @media(min-width:900px){
      .grid3{ grid-template-columns:1fr 1fr 1fr; }
    }
    .grid2 > div, .grid3 > div{ min-width:0; }

    /* Content split line */
    .items{
      border-top: 1px solid var(--line);
      margin-top: 16px;
      padding-top: 6px;
    }

    /* Checklist item card */
    .item{
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px;
      margin-bottom:10px;
      background:#fff;
    }

    .desc{
      font-size: var(--itemFont);
      line-height: 1.25rem;
      color: var(--text);
      margin-bottom: 10px;
    }

    /* Choice row */
    .yn{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }

    /* IMPORTANT: keep selections normal sized (fix for oversized iPhone rendering) */
    input[type="radio"]{
      -webkit-appearance: radio;
      appearance: radio;
      accent-color: var(--heading); /* #00007e */
      width: 18px;
      height: 18px;
      margin: 0;
      flex: 0 0 auto;
      transform: none;
    }

    .ynlabel{
      display:flex;
      align-items:center;
      gap:8px;
      padding: 10px 12px;      /* reasonable tap size without giant circles */
      border:1px solid var(--line);
      border-radius:999px;
      background:#fff;
      min-height: 44px;
      user-select:none;
      color: var(--text);
      font-size: 15px;
    }

    /* Spacing after Specify (optional) to match item-to-item spacing */
    input[name="sectionIISpecify"]{ margin-bottom: 10px; }

    /* PDF behind button */
    details{
      margin-top:22px;
      border:1px solid var(--line);
      border-radius:14px;
      background:#fff;
      overflow:hidden;
    }
    summary{
      list-style:none;
      cursor:pointer;
      padding: 14px;
      min-height: var(--tap);
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight: 900;
      font-size: 18px;
      color: var(--heading);
    }
    summary::-webkit-details-marker{ display:none; }

    .pdfwrap{
      border-top: 1px solid var(--line);
      padding: 10px;
    }
    iframe{
      width:100%;
      height:70vh;
      border: 1px solid var(--line);
      border-radius: 12px;
      background:#fff;
    }

    /* Liability text block */
    .liability-text{
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px;
      margin: 0 0 12px;
      font-size:14px;
      line-height:1.35rem;
      background:#fff;
    }

    /* Buttons */
    .btns{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin: 0 0 10px;
    }

    button{
      min-height: var(--tap);
      padding: 12px 18px;
      border-radius:14px;
      border:1px solid var(--line);
      background:#fff;
      color: var(--text);
      font-weight: 900;
      cursor:pointer;
      font-size: 15px;
    }

    button.primary{
      background: rgba(40,62,138,.08);
      color: var(--btn);
      border-color: rgba(40,62,138,.35);
    }

    /* Sticky submit */
    .stickybar{
      position: sticky;
      bottom: 0;
      margin-top: 16px;
      padding: 10px;
      border:1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(255,255,255,.95);
      backdrop-filter: blur(8px);
      box-shadow: var(--shadow);
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap:10px;
    }

    .stickybar .left{
      font-size:12px;
      color: var(--muted);
      line-height: 1.1rem;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="brandbar">
      <img src="./gjhh-logo.png" alt="G&J Heavy Haul logo">
      <h1>Vehicle / Heavy Equipment Pre-Use Inspection Checklist</h1>
    </div>

    <div class="card">
      <div class="section">
        <div class="title">GENERAL EQUIPMENT INFORMATION</div>
      </div>

      <div class="grid2">
        <div>
          <label>Equipment No.</label>
          <input type="text" name="equipmentNo" />
        </div>
      </div>

      <details>
        <summary>View PDF Reference</summary>
        <div class="pdfwrap">
          <iframe src="./OF-296_Equipment%20Checklist.pdf" title="OF-296 PDF"></iframe>
        </div>
      </details>

      <div class="items">
        <div class="section">
          <div class="title">PRE-USE INSPECTION</div>
        </div>

        <div class="btns">
          <button class="primary" type="button" onclick="stampNow()">Set Date/Time to Now</button>
        </div>

        <div class="grid3">
          <div>
            <label>Status</label>
            <select name="preUseStatus">
              <option value="">—</option>
              <option value="Accepted">Accepted</option>
              <option value="Rejected">Rejected</option>
            </select>
          </div>

          <div>
            <label>Miles / Hrs</label>
            <input type="text" name="preUseMilesHrs" inputmode="decimal" />
          </div>

          <div>
            <label>Date</label>
            <input type="date" name="preUseDate" />
          </div>

          <div>
            <label>Time</label>
            <input type="time" name="preUseTime" />
          </div>
        </div>

        <div class="section">
          <div class="title">SECTION I — HEAVY EQUIPMENT</div>
          <div class="sub">SAFE TO OPERATE?</div>
        </div>
        <div id="heavyItems"></div>

        <div class="section">
          <div class="title">SECTION II — ATTACHMENTS / PUMP / CHAINSAW / OTHER</div>
          <div class="sub">SAFE TO OPERATE?</div>
        </div>

        <label>Specify (optional)</label>
        <input type="text" name="sectionIISpecify" placeholder="e.g., broom, water truck pump, chainsaw, etc." />
        <div id="attachItems"></div>

        <div class="section">
          <div class="title">SECTION III — LIABILITY</div>
        </div>

        <p class="liability-text">
          The purpose of this checklist is to document pre-existing vehicle/equipment condition and to determine suitability for incident use.
          I hereby acknowledge full responsibility and liability for the operation and mechanical condition of the vehicle/equipment described herein.
        </p>

        <div class="grid2">
          <div>
            <label>Operator Printed Name</label>
            <input type="text" name="operatorName" />
          </div>

          <div>
            <label>Operator Signature (typed)</label>
            <input type="text" name="operatorSignature" placeholder="Type full name" />
          </div>

          <div>
            <label>Date</label>
            <input type="date" name="operatorDate" />
          </div>
        </div>

        <div class="section">
          <div class="title">SECTION IV — TRANSPORT OR SUPPORT VEHICLES</div>
          <div class="sub">SAFE TO OPERATE?</div>
        </div>
        <div id="transportItems"></div>

        <div class="section">
          <div class="title">SECTION V — REMARKS</div>
        </div>

        <label>Describe all unsatisfactory items and identify by line number</label>
        <textarea name="remarks"></textarea>

        <div class="section">
          <div class="title">RELEASE</div>
        </div>

        <div class="grid3">
          <div>
            <label>No Damage / No Claim</label>
            <select name="releaseNoDamage">
              <option value="">—</option>
              <option value="Yes">Yes</option>
              <option value="No">No</option>
            </select>
          </div>

          <div>
            <label>Miles / Hrs</label>
            <input type="text" name="releaseMilesHrs" inputmode="decimal" />
          </div>

          <div>
            <label>Date</label>
            <input type="date" name="releaseDate" />
          </div>

          <div>
            <label>Time</label>
            <input type="time" name="releaseTime" />
          </div>

          <div>
            <label>Operator Printed Name</label>
            <input type="text" name="releaseOperatorName" />
          </div>

          <div>
            <label>Operator Signature (typed)</label>
            <input type="text" name="releaseOperatorSignature" placeholder="Type full name" />
          </div>
        </div>

        <div class="stickybar">
          <div class="left">
            Submit opens an email draft to salud.madrigal@gjheavyhaul.com using the device’s default mail app.
          </div>
          <div>
            <button class="primary" type="button" onclick="submitEmail()">Submit</button>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  // Full item language aligned to OF-296 (REV. 2-2016)

  const heavy = [
    "1. ROPS, roll-over protection system: Manufacturer-approved system secured to mainframe of tractor. Must include approved seat belts. *",
    "2. Gauges and lights: mounted and function properly. *",
    "3. Battery: check for corrosion, loose terminals, and hold downs.",
    "4. Engine running: check oil pressure, knocks and leaks.",
    "5. Sweeps, deflectors, safety screens (glass). *",
    "6. Steering components: tight, free of play. *",
    "7. Brakes: damaged, worn or out of adjustment. *",
    "8. Exhaust system: equipped with a USFS-qualified spark arrester unless turbocharged.",
    "9. Fuel system: free of leaks and damage. *",
    "10. Cooling system: full, free of leaks and damage. *",
    "11. Fan and fan belts: check for proper tension. No fraying/cracks.",
    "12. Engine support, equalizer bar, springs, main springs: check shackle bolts, shifted spring leaf.",
    "13. Belly plate, radiator guards: securely mounted and free from debris. *",
    "14. Final drive, transmission and differential: check for dripping.",
    "15. Sprocket and idlers: crack in spokes, sharp sprocket teeth, no welds.",
    "16. Tracks and rollers: no broken pads, loose rollers, broken flanges. *",
    "17. Dozer and assembly: trunnion bolts missing, cracks. *",
    "18. Rear hitch (drawbar): serviceable, safe.",
    "19. Body and cab condition: describe dents and damage.",
    "20. Equipment cleanliness: all areas free of flammable materials, noxious weeds, and invasive species.",
    "21. All hydraulic attachments: operate smoothly and all cylinders hold at extension; hose, lines, and pumps have no excessive wear and/or leaks.",
    "22. Backup or travel alarm (minimum 87 dbl). *",
    "23. Oil level and condition: full and clean."
  ];

  const attach = [
    "1. No missing/broken components, no loose hardware.",
    "2. Sufficient fluid levels (oil, coolant, etc.).",
    "3. Cutting bar: straight, chain in good condition.",
    "4. Cutting teeth: sharp, good repair.",
    "5. Pump: builds pressure, no water or oil leaks.",
    "6. Engine starts, idles, and shuts off with switch."
  ];

  const transport = [
    "1. “DOT” or CVSA inspection in the last 12 months (if required). *",
    "2. Gauges and lights: mounted and function properly. *",
    "3. Seat belts: operate properly for each seating position. *",
    "4. Glass and mirrors, no cracks in vision. *",
    "5. Wipers, washers, and horn operate properly. *",
    "6. Clutch pedal: proper adjustment (if applicable).",
    "7. Cooling system: full, free of leaks and damage.",
    "8. Fluid levels (e.g. oil) and condition: full and clean.",
    "9. Battery: check for corrosion, loose terminals and hold downs.",
    "10. Fuel system: free of leaks and damage. *",
    "11. Electrical system: alternator and starter work. *",
    "12. Engine running: check oil pressure, knocks, and leaks.",
    "13. Transmission: check for leaks.",
    "14. Steering components: tight, free of play. *",
    "15. Brakes: damaged, worn or out of adjustment. *",
    "16. 4-Wheel drive: check transfer case, leaks (if applicable).",
    "17. Drive line U-joints: check for looseness.",
    "18. Suspension systems: springs, shocks, other. *",
    "19. Differential(s): check for leaks.",
    "20. Exhaust system: no leaks under cab or before turbo. *",
    "21. Frame condition, body/bed properly attached. *",
    "22. Tires/wheels (including spare and all changing equipment): sufficient load rating, tread depth, no major damage. *",
    "23. Body and interior condition: describe and locate damage (see supplemental information on back).",
    "24. Emergency equipment required. * (Fire extinguisher / Spare fuses / Reflectors)",
    "25. Operator(s) properly licensed. †"
  ];

  function renderYesNoNA(containerId, items, prefix) {
    const root = document.getElementById(containerId);
    root.innerHTML = "";
    items.forEach((t, idx) => {
      const key = `${prefix}_${idx+1}`;
      const el = document.createElement("div");
      el.className = "item";
      el.innerHTML = `
        <div class="desc">${t}</div>
        <div class="yn" role="group" aria-label="${t}">
          <label class="ynlabel"><input type="radio" name="${key}" value="Yes"> Yes</label>
          <label class="ynlabel"><input type="radio" name="${key}" value="No"> No</label>
          <label class="ynlabel"><input type="radio" name="${key}" value="" checked> N/A</label>
        </div>
      `;
      root.appendChild(el);
    });
  }

  renderYesNoNA("heavyItems", heavy, "heavy");
  renderYesNoNA("attachItems", attach, "attach");
  renderYesNoNA("transportItems", transport, "transport");

  function getValue(name) {
    const el = document.querySelector(`[name="${name}"]`);
    return el ? (el.value || "").trim() : "";
  }

  function getRadioVal(groupName) {
    const sel = document.querySelector(`input[name="${groupName}"]:checked`);
    return sel ? sel.value : "";
  }

  function collectData() {
    return {
      equipmentNo: getValue("equipmentNo"),

      preUseStatus: getValue("preUseStatus"),
      preUseMilesHrs: getValue("preUseMilesHrs"),
      preUseDate: getValue("preUseDate"),
      preUseTime: getValue("preUseTime"),

      sectionI: heavy.map((t, i) => ({ item: t, val: getRadioVal(`heavy_${i+1}`) })),
      sectionIISpecify: getValue("sectionIISpecify"),
      sectionII: attach.map((t, i) => ({ item: t, val: getRadioVal(`attach_${i+1}`) })),

      operatorName: getValue("operatorName"),
      operatorSignature: getValue("operatorSignature"),
      operatorDate: getValue("operatorDate"),

      sectionIV: transport.map((t, i) => ({ item: t, val: getRadioVal(`transport_${i+1}`) })),

      remarks: getValue("remarks"),

      releaseNoDamage: getValue("releaseNoDamage"),
      releaseMilesHrs: getValue("releaseMilesHrs"),
      releaseDate: getValue("releaseDate"),
      releaseTime: getValue("releaseTime"),
      releaseOperatorName: getValue("releaseOperatorName"),
      releaseOperatorSignature: getValue("releaseOperatorSignature")
    };
  }

  function formatEmailBody(d) {
    const line = (arr) => arr.map(x => `${x.item} => ${x.val || "N/A"}`).join("\n");

    return [
      "VEHICLE / HEAVY EQUIPMENT PRE-USE INSPECTION",
      "",
      `Equipment No.: ${d.equipmentNo}`,
      "",
      "PRE-USE INSPECTION",
      `Status: ${d.preUseStatus}`,
      `Miles/Hrs: ${d.preUseMilesHrs}`,
      `Date: ${d.preUseDate}`,
      `Time: ${d.preUseTime}`,
      "",
      "SECTION I — HEAVY EQUIPMENT (SAFE TO OPERATE? Yes / No / N/A)",
      line(d.sectionI),
      "",
      `SECTION II — ATTACHMENTS/OTHER (SAFE TO OPERATE? Yes / No / N/A) (Specify): ${d.sectionIISpecify}`,
      line(d.sectionII),
      "",
      "SECTION III — LIABILITY",
      "The purpose of this checklist is to document pre-existing vehicle/equipment condition and to determine suitability for incident use. I hereby acknowledge full responsibility and liability for the operation and mechanical condition of the vehicle/equipment described herein.",
      `Operator Printed Name: ${d.operatorName}`,
      `Operator Signature (typed): ${d.operatorSignature}`,
      `Date: ${d.operatorDate}`,
      "",
      "SECTION IV — TRANSPORT/SUPPORT VEHICLES (SAFE TO OPERATE? Yes / No / N/A)",
      line(d.sectionIV),
      "",
      "SECTION V — REMARKS",
      d.remarks || "—",
      "",
      "RELEASE",
      `No Damage/No Claim: ${d.releaseNoDamage}`,
      `Miles/Hrs: ${d.releaseMilesHrs}`,
      `Date: ${d.releaseDate}`,
      `Time: ${d.releaseTime}`,
      `Operator Printed Name: ${d.releaseOperatorName}`,
      `Operator Signature (typed): ${d.releaseOperatorSignature}`
    ].join("\n");
  }

  function submitEmail() {
    const d = collectData();
    const subjectParts = ["G&J Pre-Use Inspection", d.equipmentNo || "", d.preUseDate || ""].filter(Boolean);
    const subject = subjectParts.join(" | ");
    const body = formatEmailBody(d);

    const mailto = `mailto:salud.madrigal@gjheavyhaul.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    window.location.href = mailto;
  }

  function stampNow() {
    const now = new Date();
    const yyyy = now.getFullYear();
    const mm = String(now.getMonth() + 1).padStart(2, "0");
    const dd = String(now.getDate()).padStart(2, "0");
    const hh = String(now.getHours()).padStart(2, "0");
    const mi = String(now.getMinutes()).padStart(2, "0");

    const dateVal = `${yyyy}-${mm}-${dd}`;
    const timeVal = `${hh}:${mi}`;

    const set = (name, val) => {
      const el = document.querySelector(`[name="${name}"]`);
      if (el) el.value = val;
    };

    set("preUseDate", dateVal);
    set("preUseTime", timeVal);
    set("operatorDate", dateVal);
    set("releaseDate", dateVal);
    set("releaseTime", timeVal);
  }
</script>
</body>
</html>
