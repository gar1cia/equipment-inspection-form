<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Vehicle / Heavy Equipment Pre-Use Inspection Checklist</title>

  <style>
    :root{
      --accent:#283e8a;
      --bg:#f6f7fb;
      --card:#ffffff;
      --ink:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --shadow: 0 10px 24px rgba(17,24,39,.08);
      --radius:16px;
      --tap:48px;
      --itemFont: 14px;
      --sectionFont: calc(var(--itemFont) * 1.6); /* 1.6x item line font */
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--ink);
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 14px;
      padding-bottom: calc(14px + env(safe-area-inset-bottom));
    }

    /* Centered logo + title */
    .brandbar{
      display:flex;
      flex-direction: column;
      align-items:center;
      justify-content:center;
      gap: 10px;
      text-align:center;
      padding: 18px 14px;
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 12px;
    }

    .brandbar img{
      width: min(260px, 70vw);
      height: auto;
      object-fit: contain;
    }

    h1{
      margin: 0;
      font-size: clamp(26px, 6.2vw, 40px);
      line-height: 1.12;
      letter-spacing: -.01em;
      color: var(--ink);
    }

    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 14px;
    }

    /* Section headings (e.g., PRE-USE INSPECTION) */
    h2.section-title{
      margin: 30px 0 12px;     /* whitespace before each subheading */
      font-size: var(--sectionFont);
      color: var(--muted);
      font-weight: 800;
      letter-spacing: .08em;
      text-transform: uppercase;
    }
    h2.section-title:first-of-type{
      margin-top: 0;
    }

    label{
      display:block;
      font-size: 12px;
      color: var(--muted);
      margin: 12px 0 6px;
    }

    input[type="text"], input[type="date"], input[type="time"], textarea, select{
      width:100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid var(--line);
      background: #fff;
      color: var(--ink);
      outline: none;
      min-height: var(--tap);
      font-size: 16px; /* prevents iOS zoom */
    }

    input[readonly]{ background:#f9fafb; }

    textarea{
      min-height: 110px;
      resize: vertical;
    }

    .grid2{
      display:grid;
      gap: 10px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 720px){
      .grid2{ grid-template-columns: 1fr 1fr; }
    }

    .grid3{
      display:grid;
      gap: 10px;
      grid-template-columns: 1fr;
    }
    @media (min-width: 900px){
      .grid3{ grid-template-columns: 1fr 1fr 1fr; }
    }

    .items{
      border-top: 1px solid var(--line);
      margin-top: 16px;
      padding-top: 6px;
    }

    .item{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
      padding: 12px;
      border: 1px solid var(--line);
      border-radius: 14px;
      margin-bottom: 10px;
      background: #fff;
    }

    .desc{
      font-size: var(--itemFont);
      line-height: 1.25rem;
      color: var(--ink);
    }

    .yn{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
    }

    .ynlabel{
      display:flex;
      align-items:center;
      gap: 8px;
      padding: 10px 12px;
      border: 1px solid var(--line);
      border-radius: 999px;
      background: #fff;
      min-height: var(--tap);
      user-select:none;
    }

    .ynlabel input{
      width: 18px;
      height: 18px;
    }

    /* Buttons */
    .btns{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    button{
      min-height: var(--tap);
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: #fff;
      color: var(--ink);
      cursor: pointer;
      font-size: 15px;
    }

    button.primary{
      border-color: rgba(40,62,138,.35);
      background: rgba(40,62,138,.08);
      color: var(--accent);
      font-weight: 800;
    }

    button.danger{
      color:#b42318;
      background:#fff;
      border-color:#fecaca;
      font-weight: 700;
    }

    button:active{ transform: translateY(1px); }

    .note{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.25rem;
      margin-top: 10px;
    }

    /* PDF behind button (details/summary = mobile friendly) */
    details{
      margin-top: 22px; /* extra whitespace above PDF button */
      border: 1px solid var(--line);
      border-radius: 14px;
      background: #fff;
      overflow:hidden;
    }
    summary{
      list-style:none;
      cursor:pointer;
      padding: 14px 14px;
      min-height: var(--tap);
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      font-weight: 900;
      font-size: 18px;
      color: var(--accent);
    }
    summary::-webkit-details-marker{ display:none; }
    .pdfwrap{
      border-top: 1px solid var(--line);
      padding: 10px;
    }
    iframe{
      width:100%;
      height: 70vh;
      border: 1px solid var(--line);
      border-radius: 12px;
      background:#fff;
    }

    /* Sticky bar for mobile */
    .stickybar{
      position: sticky;
      bottom: 0;
      margin-top: 14px;
      padding: 10px;
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(255,255,255,.92);
      backdrop-filter: blur(8px);
      box-shadow: var(--shadow);
      display:flex;
      gap: 10px;
      justify-content: space-between;
      align-items:center;
    }
    .stickybar .left{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.1rem;
    }
    .stickybar .right{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="brandbar">
      <!-- Put the logo file in the same folder and name it exactly "gjhh-logo.png" -->
      <img src="./gjhh-logo.png" alt="G&J Heavy Haul logo">
      <h1>Vehicle / Heavy Equipment Pre-Use Inspection Checklist</h1>
    </div>

    <div class="card">
      <h2 class="section-title" style="margin-top:0;">General equipment information</h2>

      <div class="grid2">
        <!-- Removed: Incident Name/No., Resource Order No., Agreement No., Expiration Date -->

        <div>
          <label>Contractor Name</label>
          <input type="text" name="contractorName" value="G&J Heavy Haul" readonly />
        </div>

        <div>
          <label>Make / Model</label>
          <input type="text" name="makeModel" />
        </div>

        <div>
          <label>Equipment Type</label>
          <input type="text" name="equipmentType" />
        </div>

        <div>
          <label>VIN / Serial No.</label>
          <input type="text" name="vinSerial" />
        </div>

        <div>
          <label>License No. / State</label>
          <input type="text" name="licenseState" />
        </div>
      </div>

      <details>
        <summary>View PDF reference</summary>
        <div class="pdfwrap">
          <div class="note" style="margin-top:0;">
            Put the PDF in the same folder as this HTML and name it <code>OF-296_Equipment Checklist.pdf</code>.
          </div>
          <iframe src="./OF-296_Equipment%20Checklist.pdf" title="OF-296 PDF"></iframe>
        </div>
      </details>

      <div class="items">
        <h2 class="section-title">Section I — Heavy equipment (Acceptable / Not acceptable / N/A)</h2>
        <div id="heavyItems"></div>

        <h2 class="section-title">Section II — Attachments / Pump / Chainsaw / Other (Acceptable / Not acceptable / N/A)</h2>
        <label>Specify (optional)</label>
        <input type="text" name="sectionIISpecify" placeholder="e.g., broom, water truck pump, chainsaw, etc." />
        <div id="attachItems"></div>

        <h2 class="section-title">Pre-use inspection</h2>
        <div class="btns" style="margin-top:0;">
          <button class="primary" type="button" onclick="stampNow()">Set Date/Time to Now</button>
        </div>

        <div class="grid3">
          <div>
            <label>Status</label>
            <select name="preUseStatus">
              <option value="">—</option>
              <option value="Accepted">Accepted</option>
              <option value="Rejected">Rejected</option>
            </select>
          </div>
          <div>
            <label>Miles / Hrs</label>
            <input type="text" name="preUseMilesHrs" inputmode="decimal" />
          </div>
          <div>
            <label>Date</label>
            <input type="date" name="preUseDate" />
          </div>
          <div>
            <label>Time</label>
            <input type="time" name="preUseTime" />
          </div>
          <div>
            <label>Inspector Printed Name</label>
            <input type="text" name="inspectorName" />
          </div>
          <div>
            <label>Inspector Title</label>
            <input type="text" name="inspectorTitle" />
          </div>
        </div>

        <h2 class="section-title">Section III — Liability</h2>
        <div class="grid2">
          <div>
            <label>Operator Printed Name</label>
            <input type="text" name="operatorName" />
          </div>
          <div>
            <label>Operator Title</label>
            <input type="text" name="operatorTitle" />
          </div>
          <div>
            <label>Operator Signature (typed)</label>
            <input type="text" name="operatorSignature" placeholder="Type full name" />
          </div>
          <div>
            <label>Date</label>
            <input type="date" name="operatorDate" />
          </div>
        </div>

        <h2 class="section-title">Section IV — Transport or support vehicles (Acceptable / Not acceptable / N/A)</h2>
        <div id="transportItems"></div>

        <h2 class="section-title">Release</h2>
        <div class="grid3">
          <div>
            <label>No Damage / No Claim</label>
            <select name="releaseNoDamage">
              <option value="">—</option>
              <option value="Yes">Yes</option>
              <option value="No">No</option>
            </select>
          </div>
          <div>
            <label>Miles / Hrs</label>
            <input type="text" name="releaseMilesHrs" inputmode="decimal" />
          </div>
          <div>
            <label>Date</label>
            <input type="date" name="releaseDate" />
          </div>
          <div>
            <label>Time</label>
            <input type="time" name="releaseTime" />
          </div>
          <div>
            <label>Inspector Printed Name</label>
            <input type="text" name="releaseInspectorName" />
          </div>
          <div>
            <label>Operator Printed Name</label>
            <input type="text" name="releaseOperatorName" />
          </div>
        </div>

        <h2 class="section-title">Section V — Remarks</h2>
        <label>Describe all unsatisfactory items and identify by line number</label>
        <textarea name="remarks"></textarea>

        <div class="stickybar">
          <div class="left">
            Submit opens an email draft to paul@archercivilllc.com using the device’s default mail app.
          </div>
          <div class="right">
            <button class="primary" type="button" onclick="submitEmail()">Submit</button>
            <button class="danger" type="button" onclick="resetForm()">Clear</button>
          </div>
        </div>

        <p class="note">
          If an email client truncates very long messages, the next upgrade is a server workflow (Power Automate / webhook)
          that emails and archives the submission automatically.
        </p>
      </div>
    </div>
  </div>

<script>
  // Full item language aligned to OF-296 (REV. 2-2016)

  const heavy = [
    "1. ROPS, roll-over protection system: Manufacturer-approved system secured to mainframe of tractor. Must include approved seat belts. *",
    "2. Gauges and lights: mounted and function properly. *",
    "3. Battery: check for corrosion, loose terminals, and hold downs.",
    "4. Engine running: check oil pressure, knocks and leaks.",
    "5. Sweeps, deflectors, safety screens (glass). *",
    "6. Steering components: tight, free of play. *",
    "7. Brakes: damaged, worn or out of adjustment. *",
    "8. Exhaust system: equipped with a USFS-qualified spark arrester unless turbocharged.",
    "9. Fuel system: free of leaks and damage. *",
    "10. Cooling system: full, free of leaks and damage. *",
    "11. Fan and fan belts: check for proper tension. No fraying/cracks.",
    "12. Engine support, equalizer bar, springs, main springs: check shackle bolts, shifted spring leaf.",
    "13. Belly plate, radiator guards: securely mounted and free from debris. *",
    "14. Final drive, transmission and differential: check for dripping.",
    "15. Sprocket and idlers: crack in spokes, sharp sprocket teeth, no welds.",
    "16. Tracks and rollers: no broken pads, loose rollers, broken flanges. *",
    "17. Dozer and assembly: trunnion bolts missing, cracks. *",
    "18. Rear hitch (drawbar): serviceable, safe.",
    "19. Body and cab condition: describe dents and damage.",
    "20. Equipment cleanliness: all areas free of flammable materials, noxious weeds, and invasive species.",
    "21. All hydraulic attachments: operate smoothly and all cylinders hold at extension; hose, lines, and pumps have no excessive wear and/or leaks.",
    "22. Backup or travel alarm (minimum 87 dbl). *",
    "23. Oil level and condition: full and clean."
  ];

  const attach = [
    "1. No missing/broken components, no loose hardware.",
    "2. Sufficient fluid levels (oil, coolant, etc.).",
    "3. Cutting bar: straight, chain in good condition.",
    "4. Cutting teeth: sharp, good repair.",
    "5. Pump: builds pressure, no water or oil leaks.",
    "6. Engine starts, idles, and shuts off with switch."
  ];

  const transport = [
    "1. “DOT” or CVSA inspection in the last 12 months (if required). *",
    "2. Gauges and lights: mounted and function properly. *",
    "3. Seat belts: operate properly for each seating position. *",
    "4. Glass and mirrors, no cracks in vision. *",
    "5. Wipers, washers, and horn operate properly. *",
    "6. Clutch pedal: proper adjustment (if applicable).",
    "7. Cooling system: full, free of leaks and damage.",
    "8. Fluid levels (e.g. oil) and condition: full and clean.",
    "9. Battery: check for corrosion, loose terminals and hold downs.",
    "10. Fuel system: free of leaks and damage. *",
    "11. Electrical system: alternator and starter work. *",
    "12. Engine running: check oil pressure, knocks, and leaks.",
    "13. Transmission: check for leaks.",
    "14. Steering components: tight, free of play. *",
    "15. Brakes: damaged, worn or out of adjustment. *",
    "16. 4-Wheel drive: check transfer case, leaks (if applicable).",
    "17. Drive line U-joints: check for looseness.",
    "18. Suspension systems: springs, shocks, other. *",
    "19. Differential(s): check for leaks.",
    "20. Exhaust system: no leaks under cab or before turbo. *",
    "21. Frame condition, body/bed properly attached. *",
    "22. Tires/wheels (including spare and all changing equipment): sufficient load rating, tread depth, no major damage. *",
    "23. Body and interior condition: describe and locate damage (see supplemental information on back).",
    "24. Emergency equipment required. * (Fire extinguisher / Spare fuses / Reflectors)",
    "25. Operator(s) properly licensed. †"
  ];

  function renderAccept(containerId, items, prefix) {
    const root = document.getElementById(containerId);
    items.forEach((t, idx) => {
      const key = `${prefix}_${idx+1}`;
      const el = document.createElement("div");
      el.className = "item";
      el.innerHTML = `
        <div class="desc">${t}</div>
        <div class="yn" role="group" aria-label="${t}">
          <label class="ynlabel"><input type="radio" name="${key}" value="Acceptable"> Acceptable</label>
          <label class="ynlabel"><input type="radio" name="${key}" value="Not acceptable"> Not acceptable</label>
          <label class="ynlabel"><input type="radio" name="${key}" value="" checked> N/A</label>
        </div>
      `;
      root.appendChild(el);
    });
  }

  renderAccept("heavyItems", heavy, "heavy");
  renderAccept("attachItems", attach, "attach");
  renderAccept("transportItems", transport, "transport");

  function getValue(name) {
    const el = document.querySelector(`[name="${name}"]`);
    if (!el) return "";
    return (el.value || "").trim();
  }

  function getRadioVal(groupName) {
    const sel = document.querySelector(`input[name="${groupName}"]:checked`);
    return sel ? sel.value : "";
  }

  function collectData() {
    return {
      contractorName: getValue("contractorName"),
      makeModel: getValue("makeModel"),
      equipmentType: getValue("equipmentType"),
      vinSerial: getValue("vinSerial"),
      licenseState: getValue("licenseState"),
      sectionI: heavy.map((t, i) => ({ item: t, val: getRadioVal(`heavy_${i+1}`) })),
      sectionIISpecify: getValue("sectionIISpecify"),
      sectionII: attach.map((t, i) => ({ item: t, val: getRadioVal(`attach_${i+1}`) })),
      preUseStatus: getValue("preUseStatus"),
      preUseMilesHrs: getValue("preUseMilesHrs"),
      preUseDate: getValue("preUseDate"),
      preUseTime: getValue("preUseTime"),
      inspectorName: getValue("inspectorName"),
      inspectorTitle: getValue("inspectorTitle"),
      operatorName: getValue("operatorName"),
      operatorTitle: getValue("operatorTitle"),
      operatorSignature: getValue("operatorSignature"),
      operatorDate: getValue("operatorDate"),
      sectionIV: transport.map((t, i) => ({ item: t, val: getRadioVal(`transport_${i+1}`) })),
      releaseNoDamage: getValue("releaseNoDamage"),
      releaseMilesHrs: getValue("releaseMilesHrs"),
      releaseDate: getValue("releaseDate"),
      releaseTime: getValue("releaseTime"),
      releaseInspectorName: getValue("releaseInspectorName"),
      releaseOperatorName: getValue("releaseOperatorName"),
      remarks: getValue("remarks")
    };
  }

  function formatEmailBody(d) {
    const line = (arr) => arr.map(x => `${x.item} => ${x.val || "N/A"}`).join("\n");

    return [
      "VEHICLE / HEAVY EQUIPMENT PRE-USE INSPECTION",
      "",
      `Contractor Name: ${d.contractorName}`,
      `Make/Model: ${d.makeModel}`,
      `Equipment Type: ${d.equipmentType}`,
      `VIN/Serial No.: ${d.vinSerial}`,
      `License No./State: ${d.licenseState}`,
      "",
      "SECTION I — HEAVY EQUIPMENT (Acceptable / Not acceptable / N/A)",
      line(d.sectionI),
      "",
      `SECTION II — ATTACHMENTS/OTHER (Specify): ${d.sectionIISpecify}`,
      line(d.sectionII),
      "",
      "PRE-USE INSPECTION",
      `Status: ${d.preUseStatus}`,
      `Miles/Hrs: ${d.preUseMilesHrs}`,
      `Date: ${d.preUseDate}`,
      `Time: ${d.preUseTime}`,
      `Inspector: ${d.inspectorName} (${d.inspectorTitle})`,
      "",
      "SECTION III — LIABILITY",
      `Operator: ${d.operatorName} (${d.operatorTitle})`,
      `Signature (typed): ${d.operatorSignature}`,
      `Date: ${d.operatorDate}`,
      "",
      "SECTION IV — TRANSPORT/SUPPORT VEHICLES (Acceptable / Not acceptable / N/A)",
      line(d.sectionIV),
      "",
      "RELEASE",
      `No Damage/No Claim: ${d.releaseNoDamage}`,
      `Miles/Hrs: ${d.releaseMilesHrs}`,
      `Date: ${d.releaseDate}`,
      `Time: ${d.releaseTime}`,
      `Inspector: ${d.releaseInspectorName}`,
      `Operator: ${d.releaseOperatorName}`,
      "",
      "REMARKS",
      d.remarks || "—"
    ].join("\n");
  }

  function submitEmail() {
    const d = collectData();

    const subjectParts = [
      "G&J Pre-Use Inspection",
      d.makeModel || d.equipmentType || "",
      d.licenseState || "",
      d.preUseDate || ""
    ].filter(Boolean);

    const subject = subjectParts.join(" | ");
    const body = formatEmailBody(d);

    const mailto = `mailto:paul@archercivilllc.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    window.location.href = mailto;
  }

  function resetForm() {
    // Keep contractorName prefilled/readonly
    document.querySelectorAll('input[type="text"]:not([name="contractorName"]), input[type="date"], input[type="time"], textarea')
      .forEach(el => el.value = "");
    document.querySelectorAll('select').forEach(el => el.value = "");

    ["heavy","attach","transport"].forEach(prefix => {
      document.querySelectorAll(`input[name^="${prefix}_"]`).forEach(r => {
        if (r.value === "") r.checked = true; // N/A default
      });
    });
  }

  function stampNow() {
    const now = new Date();
    const yyyy = now.getFullYear();
    const mm = String(now.getMonth() + 1).padStart(2, "0");
    const dd = String(now.getDate()).padStart(2, "0");
    const hh = String(now.getHours()).padStart(2, "0");
    const mi = String(now.getMinutes()).padStart(2, "0");

    const dateVal = `${yyyy}-${mm}-${dd}`;
    const timeVal = `${hh}:${mi}`;

    const setIfExists = (name, val) => {
      const el = document.querySelector(`[name="${name}"]`);
      if (el) el.value = val;
    };

    // Pre-use
    setIfExists("preUseDate", dateVal);
    setIfExists("preUseTime", timeVal);

    // Liability signature date
    setIfExists("operatorDate", dateVal);

    // Release
    setIfExists("releaseDate", dateVal);
    setIfExists("releaseTime", timeVal);
  }
</script>
</body>
</html>
